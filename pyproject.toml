[tool.ruff]
src = ["src", "tests"]
line-length = 120
target-version = "py313"
select = [
    "E",    # pycodestyle errors
    "F",    # pyflakes
    "N",    # pep8-naming (PEP 8 naming conventions)
]
ignore = [
    "E501",  # linhas longas: manter flexível por enquanto
    "F403",  # star imports legados
    "F821",  # nomes indefinidos em caminhos condicionais
]

[tool.ruff.per-file-ignores]
"tests/**/*" = ["D", "ANN", "S101"]
"tests/unit/core/test_auth_bootstrap_microfase.py" = ["E741", "F401"]
"tests/unit/modules/passwords/test_passwords_screen_ui.py" = ["F401", "F811", "F841"]
"tests/unit/modules/lixeira/test_lixeira_service.py" = ["E731"]
"typings/**/*" = ["N801", "N802", "N803", "N806"]  # Typings refletem APIs externas
"tests/utils/test_themes.py" = ["N802"]  # Mock classes simulam API externa
"tests/unit/infra/test_archives.py" = ["N802"]  # Test name matches ZIP64 standard
"tests/unit/adapters/test_adapters_supabase_storage_fase37.py" = ["N806"]  # Mock naming convention
"tests/unit/modules/clientes/forms/test_prepare_round12.py" = ["N806"]  # Mock naming convention
"docs/devtools/pdf_batch_from_images.py" = ["N806"]  # REPO_ROOT is a constant pattern

[tool.mypy]
ignore_missing_imports = true

[tool.deptry]
# analisa código-fonte somente
ignore = ["ajuda", "runtime", "build", "dist", ".venv", "tests", ".ruff_cache", ".pytest_cache"]
# mapeamento opcional de import->distribuição (adicione se precisar)
# [tool.deptry.package_module_name_map]
# "Pillow" = ["PIL"]

[tool.vulture]
paths = ["app_gui.py", "application", "gui", "ui", "core", "infra", "utils", "adapters", "shared"]
ignore_decorators = ["@overload"]
min_confidence = 80
