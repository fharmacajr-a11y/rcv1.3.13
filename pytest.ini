[pytest]
pythonpath = .

# MODO RÁPIDO POR PADRÃO (sem coverage)
# Para rodar COBERTURA GLOBAL completa: pytest -c pytest_cov.ini
# Gera relatórios em htmlcov/ e reports/coverage.json
addopts =
    -q
    --tb=short
    --import-mode=importlib
    --ignore=scripts/visual
    --ignore=test_apply_theme_fix.py

# TEST-005: Timeout padrão para evitar testes travados
timeout = 30
timeout_method = thread

testpaths = tests

norecursedirs =
    .venv
    venv
    build
    dist
    .git
    __pycache__
    tests/archived

# Markers personalizados
markers =
    unit: testes unitários
    integration: testes de integração
    slow: testes lentos
    gui: Tests that require GUI/display (skip on headless CI)

filterwarnings =
    ignore:.*SwigPyPacked has no __module__ attribute.*:DeprecationWarning
    ignore:.*SwigPyObject has no __module__ attribute.*:DeprecationWarning
    ignore:.*swigvarlink has no __module__ attribute.*:DeprecationWarning
    ignore:builtin type swigvarlink has no __module__ attribute:DeprecationWarning
    ignore:builtin type SwigPyPacked has no __module__ attribute:DeprecationWarning
    ignore:builtin type SwigPyObject has no __module__ attribute:DeprecationWarning
    ignore:unclosed database in <sqlite3.Connection.*:ResourceWarning
    # Não referenciar categoria específica (PydanticDeprecatedSince212) para manter compatibilidade de versões
    ignore:.*PydanticDeprecatedSince212.*:DeprecationWarning
